### **1 - 1.  단일서버**

> 웹, 앱 데이터베이스, 캐시 등 전부 서버 한 대에서 실행된다.
> 

<img width="369" alt="스크린샷 2023-11-26 오후 3 02 43" src="https://github.com/organization-for-study/study-system-design-interview/assets/97773895/c9dbf2e8-2a93-4518-8dde-16e74f092730">


1. 사용자는 웹 브라우저나 모바일 앱을 통해 도메인 이름(예: [www.mysite.com](http://www.mysite.com/), api.mysite.com)으로 웹사이트에 접속을 시도합니다.
2. 웹사이트의 도메인 이름은 DNS(Domain Name System) 조회를 통해 해당 웹 서버의 IP 주소로 변환됩니다.
3. 변환된 IP 주소로 사용자의 디바이스는 HTTP 요청을 전송합니다.
4. 웹 서버는 이 HTTP 요청을 받고, 요청된 데이터를 HTML 또는 JSON형식의 문서로 반환하여 사용자에게 응답합니다.

이 과정은 인터넷 상에서 정보를 찾고, 데이터를 주고받는 기본적인 흐름을 잘 나타내고 있는 단일서버 구조입니다.

---

단일서버는 하나의 서버만을 사용하는 가장 기본적인 시스템 구성 방식입니다.

- 구성이 간단하고 관리가 용이하다.
- 초기 비용이 상대적으로 낮다.

하지만, 단일서버 구성은 여러 한계점을 가지고 있습니다.

- **트래픽 처리 능력**: 많은 사용자가 동시에 접근할 때, 단일 서버는 트래픽을 효과적으로 처리하는 데 한계가 있습니다.
- **가용성 한계 :** 서비스 제공자가 사용자에게 보장하는 성능중 하나입니다. 가용성의 부족은 단일서버 구성의 큰 단점 중 하나입니다. 높은 가용성을 달성하기 위한 설계시 고려되어야 할 것들이 있습니다.

---

여담으로 단일서버는 1990년대~2000년 초반에 인터넷 서비스퀄리티와 사용자가 낮을때 주로 이용되었습니다.(요즘도 사용하긴함)

정보가 없어 정확하진않지만 추측해봤을때, 

2004년에 마크 주커버그가 하버드 대학교 기숙사 방에서 시작했습니다. 당시 페이스북은 하버드 대학생들 만사용했었고, 기능도 지금보다 단순했습니다. 당시에 클라우드 서비스가 오늘날처럼 발달아지 않았기에 단일서버 데이터베이스를 사용한 서비스를 운영했을 가능성이 있어 단일서버를 사용했다고 개인적으로 추측했습니다.

단일 서버 환경에서 운영하는 것은 트래픽이 많지 않고, 데이터 처리 요구사항이 상대적으로 낮은 애플리케이션에 적합합니다. 그러나 사용자 기반의 확장, 데이터의 증가, 고가용성과 재해 복구 요구사항과 같은 요소들은 분산 데이터베이스 시스템이나 클라우드 기반 솔루션으로의 전환을 필요로 할 수 있습니다.

그리고 역시나 1년 뒤.. 2005년 페이스북이 악셀 파트너스(Accel Partners)로부터 첫 대규모 투자를 받은 후, 그들은 서버와 인프라를 확장하기 시작했습니다.
사용자 기반이 백만을 넘어서고 더 많은 대학교가 서비스에 추가됨에 따라, 페이스북은 데이터 센터를 임대하고, 자체 서버를 구축하며, 트래픽을 처리하기 위한 더욱 강력한 하드웨어와 소프트웨어 솔루션을 도입했고 오늘날의 메타가 됐습니다.

1년뒤인 2005년 악셀 파트너스(Accel Partners)로부터의 투자 이후, 페이스북은 규모 확장을 위해 데이터 센터를 임대하고 자체 서버를 구축하기 시작했습니다. 사용자 기반이 백만을 넘어서고 더 많은 서비스가 추가되면서, 페이스북은 트래픽 처리와 데이터 관리를 위해 더 강력한 하드웨어와 소프트웨어 솔루션을 도입했습니다. 

하버드생이 만든 소규모의 서비스가 투자를 바탕으로 서비스 사용자 규모에 따른 확장을 하며 오늘날의 메타가 된 것은, 단일서버구성을 보완하기 위해 여러 대안적인 시스템 아키텍처들로 설계를 확장-구축한 사례로 볼 수 있습니다.


![fb](https://github.com/organization-for-study/study-system-design-interview/assets/97773895/18f0da6d-89bd-4bc5-b5d0-bc8172446129)


### **1-2. 시스템 설계 아키텍쳐로 인한 규모 확장**

위 페이스북 사례처럼 서비스가 확장되며 규모가 커지지게된다면 단일 서버 구성의 한계를 넘어서면 여러 시스템 아키텍처를 사용하게 됩니다. 1장에서는 점차 확장되는 시스템 아키텍쳐 구성들을 보여주고 있습니다.

DNS (Domain Name System), CDN (Content Delivery Network), 로드 밸런서(Load Balancer), 데이터베이스 샤딩(Database Sharding), 캐시(Cache), NoSQL / SQL 데이터베이스 등을 이용하여 1장 전반적으로 “사용자 수에따른 규모 확장성”을 단계적으로 설명해주고 있습니다.

(1장 후반부의 42페이지의 이미지를 첨부 - 이렇게 확장됩니다.)

<img width="429" alt="스크린샷 2023-11-26 오후 3 05 17" src="https://github.com/organization-for-study/study-system-design-interview/assets/97773895/d8fdc6c9-82fa-44bc-ac29-df7bd31f6627">

### **1-2. 시스템 설계 아키텍쳐로 인한 규모 확장**

위 페이스북 사례처럼 서비스가 확장되며 규모가 커지지게된다면 단일 서버 구성의 한계를 넘어서면 여러 시스템 아키텍처를 사용하게 됩니다. 1장에서는 점차 확장되는 시스템 아키텍쳐 구성들을 보여주고 있습니다.

DNS (Domain Name System), CDN (Content Delivery Network), 로드 밸런서(Load Balancer), 데이터베이스 샤딩(Database Sharding), 캐시(Cache), NoSQL / SQL 데이터베이스 등을 이용하여 1장 전반적으로 “사용자 수에따른 규모 확장성”을 단계적으로 설명해주고 있습니다.

(1장 후반부의 42페이지의 이미지를 첨부 - 이렇게 확장됩니다.)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/43abd0ae-735e-4218-a0e8-8ee2927505ff/3b238a38-7e8b-4519-a679-2f4ce2acf568/Untitled.png)

### 2-1. 데이터베이스

> 웹/모바일 트래픽 처리서버(웹계층)과 데이터 서버(데이터계층) 을 분리하여 늘어난 사용자에게 서비스의 가용성을 확대할 수 있다.
> 

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/43abd0ae-735e-4218-a0e8-8ee2927505ff/2d43ab92-e061-43ec-8fb8-bdb24d688f37/Untitled.png)

관계형 데이터베이스(Relational Database)와 비관계형 데이터베이스(NoSQL Database)로 크게 두 가지로 나눌 수 있습니다. 

- **관계형 데이터베이스(RDBMS)**:
    - 데이터를 테이블 형태로 저장합니다.
    - 테이블 간의 관계를 통해 데이터를 조직화합니다.
    - SQL(Structured Query Language)을 사용하여 데이터를 관리합니다.
- **비관계형 데이터베이스(NoSQL)**:
    - 키-값 쌍, 문서, 그래프, 컬럼 패밀리 등 다양한 데이터 모델을 사용합니다.
    - 관계형 모델에 비해 유연성이 높습니다.(관계형이 아니니까)
    - JSON, YAML, XML 등의 응답/요청의 직렬/역직렬이 효율적입니다.
    *문서 지향형 데이터베이스는 JSON, XML 또는 유사한 포맷이라서
    - 유연한 스키마로 많은 양의 데이터를 저장하기에 좋습니다.
    *유연한 스키마(Flexible Schema)란?
    데이터베이스가 데이터의 구조를 미리 엄격하게 정의하지 않고, 데이터가 입력될 때 구조가 결정되거나 변경될 수 있는 방식을 말합니다.

### 2-2. **RDBMS, NoSQL**

데이터의 성격과 요구 사항에 따라 RDBMS는 정확성과 일관성이 중요한 구조화된 데이터 관리에, NoSQL은 유연성과 확장성이 요구되는 비구조화된 데이터 처리에 적합합니다. 

2005년 급성장 중인 페이스북의 경우, DB서버를 확장해야 하는 상황이었다면, RDBMS와 NoSQL의 조합을 사용했을 것으로 추측할 수 있습니다.

특히나 돈, 결제와 관련된 것들은 관계형 데이터 베이스를 적극 권장합니다.

1. **관계형 데이터베이스 사용** :
    - **사용자 정보 관리**: 사용자의 기본 정보, 연락처, 관계 상태 등의 정확하고 일관된 데이터 관리가 필요합니다.
    - **콘텐츠 저장**: 게시글, 사진, 동영상 등의 콘텐츠와 이에 대한 사용자 반응(좋아요, 댓글)을 체계적으로 저장하고 검색합니다.
    - **검색 기능**: 복잡한 쿼리를 통한 다양한 정보 검색과 데이터 분석에 적합합니다.
2. **비관계형 데이터베이스 사용** :
    - **사용자 행동 로그**: 사용자의 사이트 내 활동 로그, 클릭 패턴 등의 대규모 비구조화된 데이터를 효율적으로 수집하고 분석합니다.
    - **세션 관리**: 대량의 사용자 세션 데이터를 관리하는 데 NoSQL 데이터베이스의 빠른 읽기/쓰기 성능이 효과적입니다.
