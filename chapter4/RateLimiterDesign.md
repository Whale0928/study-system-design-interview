# 4장. 처리율 제한 장치의 설계

## 1. 처리율 제한 장치란?

>**처리율 제한 장치 (rate limiter)**

  : 클라이언트 또는 서비스가 보내는 트래픽의 처리율(rate)을 제어하기 위한 장치.

- 클라이언트 측에서 보내는 API 요청 횟수를 제한함.
- API 요청 횟수가 제한 장치에 정의된 임계치를 넘어서면 추가로 도달한 모든 호출은 처리가 중단됨.
- **장점**
    - DoS(Denial of Service) 공격에 의한 자원 고갈 방지.
        - 트위터: 3시간 동안 300개의 트윗만 올릴 수 있도록 제한.
        - 구글독스: 사용자당 분당 300회의 read 요청만 허용.
    - 비용절감.
        - 제3자 API에 사용료를 지불하고 있는 경우 비용절감에 유리함.
        - 자주 호출하게 되는 제3자 API에 대해 횟수를 제한한다면 비용절감 가능.
    - 서버 과부하 방지.
        - 봇(bot)에서 오는 트래픽이나 사용자에 의한 잘못된 패턴의 트래픽을 걸러내는데 활용 가능.
     

## 2. 처리율 제한 장치 설계와 알고리즘

### 1단계: 문제 이해 및 설계 범위 확정

### **2단계: 개략적 설계안 제시 및 동의 구하기**

**? 처리율 제한 장치를 어디에 둘 것인가 ?**

⇒ 클라이언트 측에 둘 수 도, 서버 측에 둘 수도 있음.

- 클라이언트 측에 둘 경우
    
    : 클라이언트 요청은 쉽게 위변조가 가능함. → 가능하면 서버 측에 두는 것이 좋음.
    
- 서버 측에 둘 경우
    1. 서버 측에서 구현
       
        ![서버측처리율제한장치](https://github.com/organization-for-study/study-system-design-interview/assets/126097518/189c73fc-f4cd-4f18-a35e-41051d24c06f)

    2. 처리율 제한 장치 미들웨어를 통한 구현

       ![처리율제한장치상세설계](https://github.com/organization-for-study/study-system-design-interview/assets/126097518/55167a00-89fb-4fd9-b5c3-8c29360f33be)

        

